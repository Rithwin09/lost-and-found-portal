<div class="container mt-5">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="text-center mb-0">Admin: User Management</h1>
    <a routerLink="/admin" class="btn btn-secondary">Back to Reports</a>
  </div>

  <div class="card">
    <div class="card-header">
      <h3>All Registered Users</h3>
    </div>
    <div class="card-body">
      <!-- Search Bar -->
      <form (ngSubmit)="getUsers()" class="mb-4">
        <div class="input-group">
          <input type="text" class="form-control" placeholder="Search by name or email..." [(ngModel)]="searchTerm" name="search">
          <button class="btn btn-primary" type="submit">Search</button>
        </div>
      </form>

      <div class="table-responsive">
        <table class="table table-striped table-hover">
          <thead>
            <tr>
              <th>ID</th>
              <th>Name</th>
              <th>Email</th>
              <th>Status</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let user of users">
              <td>{{ user.id }}</td>
              <td>{{ user.name }}</td>
              <td>{{ user.email }}</td>
              <td>
                <span class="badge" [ngClass]="{'bg-success': user.status === 'active', 'bg-warning text-dark': user.status === 'suspended', 'bg-danger': user.status === 'banned'}">
                  {{ user.status | uppercase }}
                </span>
              </td>
              <td>
                <button *ngIf="user.status !== 'active'" class="btn btn-success btn-sm me-2" (click)="updateUserStatus(user.id, 'active')">Reactivate</button>
                <button *ngIf="user.status === 'active'" class="btn btn-warning btn-sm me-2" (click)="updateUserStatus(user.id, 'suspended')">Suspend</button>
                <button *ngIf="user.status === 'active'" class="btn btn-danger btn-sm" (click)="updateUserStatus(user.id, 'banned')">Ban</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Pagination Controls -->
      <nav *ngIf="totalPages > 1" aria-label="Page navigation">
        <ul class="pagination justify-content-center">
          <li class="page-item" [class.disabled]="currentPage === 0">
            <a class="page-link" href="#" (click)="$event.preventDefault(); onPageChange(currentPage - 1)">Previous</a>
          </li>
          <li class="page-item" *ngFor="let page of getPagesArray()" [class.active]="page === currentPage">
            <a class="page-link" href="#" (click)="$event.preventDefault(); onPageChange(page)">{{ page + 1 }}</a>
          </li>
          <li class="page-item" [class.disabled]="currentPage >= totalPages - 1">
            <a class="page-link" href="#" (click)="$event.preventDefault(); onPageChange(currentPage + 1)">Next</a>
          </li>
        </ul>
      </nav>
    </div>
  </div>
</div>